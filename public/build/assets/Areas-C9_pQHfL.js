import{d as Y,p as v,C as x,E as z,B as A,L as u,k as N,e as c,u as i,K as y,i as b,f as t,M as P,r as C,au as G,F as $,h as d,T as H,o as s}from"./app-BFkx63mG.js";import{u as J,b as O}from"./useConfirmation-_7FICjnE.js";const Q={class:"frame-add mb-4"},U={key:2,class:"mx-auto px-4"},W={class:"table-container"},X={class:"table-order-edit"},Z={scope:"col",class:"t-col t-col-area"},ee={class:"normal-case"},te={class:"lowercase"},oe={"data-label":"Name",class:"t-col t-col-name"},se={"data-label":"Meterage",class:"t-col t-col-meterage"},ae={"data-label":"Action",class:"t-col t-col-action"},ne={colspan:"2",class:"t-col text-right"},le={key:3,class:"text-center"},ie=Y({__name:"Areas",setup(re){const{confirmationModal:D,promptDeletion:B,confirmDeletion:E,cancelDeletion:k}=J(),n=z(),M=H(),m=v(!1),g=v([]),p=v("add"),w=x(()=>n.getters.productsAreas),I=x(()=>n.state.order.product_area),V=x(()=>n.state.order.products),R=["area","meterage","product"],h=v({setter:"setProductAreaComponent",parent:"order.product_area",items:{area:{type:"input-search"},meterage:{type:"input-field"},product:{type:"select-field",format:a=>{const{thickness:e,width:r,length:_}=a.dimension;return _?`${a.floor.name} ${e}x${r}x${_}mm`:`${a.floor.name} ${e}x${r}mm`}}}});function f(){m.value=!1,p.value="add",n.commit("resetEl","product_area")}async function S(){g.value=L(I.value,R),g.value.length===0&&(await n.dispatch("addProductAreaAction",M.params.id),f())}function T(a,e){p.value="edit",n.commit("editProductArea",{area:a,product:e}),m.value=!0}async function j(){await n.dispatch("saveProductAreaAction"),f()}function F(){E(async(a,e)=>{await n.dispatch("removeProductAreaAction",{area:a,product:e})})}function L(a,e){return e.filter(r=>!a[r])}return(a,e)=>{const r=y("modal"),_=y("action-buttons"),q=y("view-buttons"),K=y("order-components");return s(),A(K,{onAddItem:e[0]||(e[0]=o=>m.value=!0)},{title:u(()=>e[1]||(e[1]=[b("Areas",-1)])),default:u(()=>[i(D)?(s(),A(r,{key:0,controls:!0,class:"send",onClose:i(k),onNo:i(k),onYes:F},{default:u(()=>e[2]||(e[2]=[b(" Do you confirm deletion? ",-1)])),_:1,__:[2]},8,["onClose","onNo"])):N("",!0),m.value?(s(),A(r,{key:1,onClose:f},{title:u(()=>[b(d(p.value)+" Area",1)]),default:u(()=>[t("div",Q,[(s(!0),c($,null,C(h.value.items,(o,l)=>(s(),A(G(o.type),{key:l,loc:`${h.value.parent}.${l}`,set:h.value.setter,format:o.format,alerts:g.value,selectItems:V.value},null,8,["loc","set","format","alerts","selectItems"]))),128))]),P(_,{class:"flex justify-end gap-2 pt-4 pr-4",mode:p.value,buttons:i(O),onSave:j,onCancel:f,onAdd:S},null,8,["mode","buttons"])]),_:1})):N("",!0),w.value.length?(s(),c("div",U,[(s(!0),c($,null,C(w.value,o=>(s(),c("div",{key:o.id,class:"table-wrap"},[t("div",W,[t("table",X,[t("thead",null,[t("tr",null,[t("th",Z,[e[3]||(e[3]=b(" Area Product - ",-1)),t("span",ee,d(o.name)+" "+d(o.type)+" - ",1),t("span",te,d(o.specs),1)]),e[4]||(e[4]=t("th",{scope:"col",class:"t-col t-col-meterage"}," Meterage ",-1)),e[5]||(e[5]=t("th",{scope:"col",class:"t-col t-col-action"}," Action ",-1))])]),t("tbody",null,[(s(!0),c($,null,C(o.areas,l=>(s(),c("tr",{key:l.id},[t("td",oe,d(l.name),1),t("td",se,d(l.meterage)+"m² ",1),t("td",ae,[P(q,{class:"flex justify-end gap-2",onRemove:()=>i(B)(l,o),onEdit:ce=>T(l,o)},null,8,["onRemove","onEdit"])])]))),128))]),t("tfoot",null,[t("tr",null,[t("td",ne," Total: "+d(o.meterage)+"m² ",1),e[6]||(e[6]=t("td",null,null,-1))])])])])]))),128))])):(s(),c("div",le," No Areas Present "))]),_:1})}}});export{ie as default};
