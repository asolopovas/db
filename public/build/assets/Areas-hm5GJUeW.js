import{d as Y,C as z,T as H,p as _,D as x,E as A,o as s,B as y,G as u,i as b,u as i,j as N,h as c,f as t,e as d,r as C,au as J,F as $,L as D}from"./app-Cn69L5Cc.js";import{u as K,b as O}from"./useConfirmation-D0auDgnd.js";const Q={class:"frame-add mb-4"},U={key:2,class:"mx-auto px-4"},W={class:"table-container"},X={class:"table-order-edit"},Z={scope:"col",class:"t-col t-col-area"},ee={class:"normal-case"},te={class:"lowercase"},oe={"data-label":"Name",class:"t-col t-col-name"},se={"data-label":"Meterage",class:"t-col t-col-meterage"},ae={"data-label":"Action",class:"t-col t-col-action"},ne={colspan:"2",class:"t-col text-right"},le={key:3,class:"text-center"},ie=Y({__name:"Areas",setup(re){const{confirmationModal:P,promptDeletion:B,confirmDeletion:E,cancelDeletion:k}=K(),n=z(),I=H(),m=_(!1),g=_([]),p=_("add"),w=x(()=>n.getters.productsAreas),M=x(()=>n.state.order.product_area),V=x(()=>n.state.order.products),j=["area","meterage","product"],h=_({setter:"setProductAreaComponent",parent:"order.product_area",items:{area:{type:"input-search"},meterage:{type:"input-field"},product:{type:"select-field",format:a=>{const{thickness:e,width:r,length:v}=a.dimension;return v?`${a.floor.name} ${e}x${r}x${v}mm`:`${a.floor.name} ${e}x${r}mm`}}}});function f(){m.value=!1,p.value="add",n.commit("resetEl","product_area")}async function R(){g.value=L(M.value,j),g.value.length===0&&(await n.dispatch("addProductAreaAction",I.params.id),f())}function S(a,e){p.value="edit",n.commit("editProductArea",{area:a,product:e}),m.value=!0}async function T(){await n.dispatch("saveProductAreaAction"),f()}function F(){E(async(a,e)=>{await n.dispatch("removeProductAreaAction",{area:a,product:e})})}function L(a,e){return e.filter(r=>!a[r])}return(a,e)=>{const r=A("modal"),v=A("action-buttons"),q=A("view-buttons"),G=A("order-components");return s(),y(G,{onAddItem:e[0]||(e[0]=o=>m.value=!0)},{title:u(()=>e[1]||(e[1]=[b("Areas")])),default:u(()=>[i(P)?(s(),y(r,{key:0,controls:!0,class:"send",onClose:i(k),onNo:i(k),onYes:F},{default:u(()=>e[2]||(e[2]=[b(" Do you confirm deletion? ")])),_:1},8,["onClose","onNo"])):N("",!0),m.value?(s(),y(r,{key:1,onClose:f},{title:u(()=>[b(c(p.value)+" Area",1)]),default:u(()=>[t("div",Q,[(s(!0),d($,null,C(h.value.items,(o,l)=>(s(),y(J(o.type),{key:l,loc:`${h.value.parent}.${l}`,set:h.value.setter,format:o.format,alerts:g.value,selectItems:V.value},null,8,["loc","set","format","alerts","selectItems"]))),128))]),D(v,{class:"flex justify-end gap-2 pt-4 pr-4",mode:p.value,buttons:i(O),onSave:T,onCancel:f,onAdd:R},null,8,["mode","buttons"])]),_:1})):N("",!0),w.value.length?(s(),d("div",U,[(s(!0),d($,null,C(w.value,o=>(s(),d("div",{key:o.id,class:"table-wrap"},[t("div",W,[t("table",X,[t("thead",null,[t("tr",null,[t("th",Z,[e[3]||(e[3]=b(" Area Product - ")),t("span",ee,c(o.name)+" "+c(o.type)+" - ",1),t("span",te,c(o.specs),1)]),e[4]||(e[4]=t("th",{scope:"col",class:"t-col t-col-meterage"}," Meterage ",-1)),e[5]||(e[5]=t("th",{scope:"col",class:"t-col t-col-action"}," Action ",-1))])]),t("tbody",null,[(s(!0),d($,null,C(o.areas,l=>(s(),d("tr",{key:l.id},[t("td",oe,c(l.name),1),t("td",se,c(l.meterage)+"m² ",1),t("td",ae,[D(q,{class:"flex justify-end gap-2",onRemove:()=>i(B)(l,o),onEdit:ce=>S(l,o)},null,8,["onRemove","onEdit"])])]))),128))]),t("tfoot",null,[t("tr",null,[t("td",ne," Total: "+c(o.meterage)+"m² ",1),e[6]||(e[6]=t("td",null,null,-1))])])])])]))),128))])):(s(),d("div",le," No Areas Present "))]),_:1})}}});export{ie as default};
